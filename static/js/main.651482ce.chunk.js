(this["webpackJsonpblog-app"]=this["webpackJsonpblog-app"]||[]).push([[0],{104:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(30),c=a.n(l),o=(a(76),a(13)),i=a(14),s=a(19),u=a(18),d=a(15),m=a(22),h=a(37),p=a(20),b=a(42),v=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={disabled:!1},n}return Object(i.a)(a,[{key:"submitHandler",value:function(e){var t=this;e.preventDefault(),this.setState({disabled:!0}),this.props.client.login(e.target.username.value,e.target.password.value).then((function(e){t.setState({disabled:!1}),t.props.loggedIn(e.data.token)})).catch((function(){alert("an error occured, please try again"),t.setState({disabled:!1})}))}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,{bg:"primary",variant:"dark",fixed:"top",expand:"md"},r.a.createElement(p.a.Brand,null,"BlogApp"),r.a.createElement(p.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(p.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(b.a,{className:"mr-auto"}))),r.a.createElement(h.a,{className:"home"},r.a.createElement(m.a,{md:3}),r.a.createElement(m.a,{md:6},r.a.createElement("br",null),r.a.createElement("h1",{className:"header3"},"Login")," ",r.a.createElement("br",null),r.a.createElement("form",{onSubmit:function(t){return e.submitHandler(t)}},r.a.createElement("h4",null,"Username"),r.a.createElement(d.a.Control,{type:"text",name:"username",placeholder:"Enter you name",disabled:this.state.disabled}),r.a.createElement("br",null),r.a.createElement("h4",null,"Password"),r.a.createElement(d.a.Control,{type:"password",name:"password",placeholder:"Password",disabled:this.state.disabled}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("button",{class:"btn btn-primary",type:"submit",disabled:this.state.disabled}," Submit "))),r.a.createElement(m.a,{md:3})))}}]),a}(r.a.Component),E=(a(50),a(45)),f=a.n(E),g=(a(82),function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).onClick=function(){f.a.options={closeButton:!0,debug:!1,extendedTimeOut:"1000",hideDuration:"1000",hideEasing:"linear",hideMethod:"fadeOut",newestOnTop:!1,onclick:null,positionClass:"toast-top-full-width",preventDuplicates:!0,progressBar:!0,showDuration:"300",showEasing:"swing",showMethod:"fadeIn",timeOut:"5000"},f.a.clear(),setTimeout((function(){return f.a.success("post added")}))},n.state={disabled:!1},n}return Object(i.a)(a,[{key:"submitHandler",value:function(e){var t,a=this;e.preventDefault(),this.setState({disabled:!0}),this.props.currentAd?(t=this.props.client.updateAd(this.props.currentAd._id,e.target.title.value,e.target.Date.value,e.target.description.value,e.target.markdown.value),console.log(t)):t=this.props.client.addAd(e.target.title.value,e.target.Date.value,e.target.description.value,e.target.markdown.value),console.log(t),t.then((function(){a.setState({disabled:!1}),document.getElementById("addForm").reset(),a.props.refreshList()})).catch((function(){console.log("catch"),alert("an error occured, please try again"),a.setState({disabled:!1})}))}},{key:"render",value:function(){var e,t,a,n,l=this;return r.a.createElement(r.a.Fragment,null,this.props.currentAd?r.a.createElement("h1",{className:"header"}," Eidt Article"):r.a.createElement("h1",{className:"header"},"New Article"),r.a.createElement(d.a,{className:"Container",onSubmit:function(e){return l.submitHandler(e)},id:"addForm"},r.a.createElement(d.a.Group,null,r.a.createElement(d.a.Label,null,"Topic title "),r.a.createElement(d.a.Control,{type:"text",defaultValue:null===(e=this.props.currentAd)||void 0===e?void 0:e.title,name:"title",disabled:this.state.disabled}),r.a.createElement("br",null)),r.a.createElement(d.a.Label,null," Date "),r.a.createElement(d.a.Control,{type:"text",defaultValue:null===(t=this.props.currentAd)||void 0===t?void 0:t.Date,name:"Date",disabled:this.state.disabled}),r.a.createElement("br",null),"Description",r.a.createElement(d.a.Control,{as:"textarea",rows:5,type:"text",defaultValue:null===(a=this.props.currentAd)||void 0===a?void 0:a.description,name:"description",disabled:this.state.disabled}),r.a.createElement("br",null),"Markdown",r.a.createElement(d.a.Control,{as:"textarea",rows:3,type:"text",defaultValue:null===(n=this.props.currentAd)||void 0===n?void 0:n.markdown,name:"markdown",disabled:this.state.disabled}),r.a.createElement("br",null),r.a.createElement("a",{href:"/",class:"btn btn-secondary"},"Cancel")," ",r.a.createElement("button",{onClick:this.onClick,type:"submit",disabled:this.state.disabled,class:"btn btn-primary"}," Save  "),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null)))}}]),a}(r.a.Component)),k=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={curDate:(new Date).toLocaleDateString()},e}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement("p",null," ",this.state.curDate))}}]),a}(r.a.Component),w=(a(58),a(126)),y=a(48),A=a(28),C=a(123),O=a(125),j=a(46),x=Object(C.a)((function(e){return{blue:{color:e.palette.getContrastText(j.a[500]),backgroundColor:j.a[500]}}}));function D(){var e=x();return r.a.createElement(O.a,{className:e.blue}," App ")}var N=a(47),S=a(52),B=a(31),T=a(6),L=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={ads:[],currentAd:void 0},n}return Object(i.a)(a,[{key:"refreshList",value:function(){var e=this;this.props.client.getAds().then((function(t){return e.setState({ads:t.data})}))}},{key:"removeAdvert",value:function(e){this.props.client.removeAd(e).then(this.refreshList())}},{key:"updateAdvert",value:function(e){this.setState({currentAd:e})}},{key:"componentDidMount",value:function(){this.refreshList()}},{key:"buildrows",value:function(){var e=this;return this.state.ads.map((function(t){return r.a.createElement("div",{key:t._id},r.a.createElement(A.a,{className:"root"},r.a.createElement(w.a,{avatar:r.a.createElement(D,null),title:t.markdown,subheader:r.a.createElement(k,null)}),r.a.createElement(y.a,null,r.a.createElement(A.a,null,r.a.createElement(h.a,null,r.a.createElement(m.a,{md:5}),r.a.createElement(m.a,{md:{span:3,offset:3}},r.a.createElement(y.a.Toggle,{as:S.a,variant:"link",eventKey:"0"},r.a.createElement("button",{className:"btn btn-primary"}," see more"),"   ",r.a.createElement("button",{className:"btn btn-danger",onClick:function(){return e.removeAdvert(t._id)}}," Delete"),"  ",r.a.createElement("button",{className:"btn btn-info",onClick:function(){return e.updateAdvert(t)}}," ",r.a.createElement(B.b,{className:"color",to:"/add"},"Edit"))),"  ")),r.a.createElement(y.a.Collapse,{eventKey:"0"},r.a.createElement(A.a.Body,null,r.a.createElement(A.a.Text,null,r.a.createElement("b",null,t.title,":")," "),r.a.createElement(A.a.Text,null,t.Date),r.a.createElement(A.a.Text,null),t.description))))))}))}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(B.a,null,r.a.createElement(p.a,{bg:"primary",variant:"dark",fixed:"top",expand:"md"},r.a.createElement(p.a.Brand,null,"BlogApp"),r.a.createElement(p.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(p.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(b.a,{className:"mr-auto"},r.a.createElement(B.b,{className:"nav-link",to:"/"},"View"),r.a.createElement(B.b,{className:"nav-link",to:"/add"},"Add")))),r.a.createElement(T.a,{path:"/add"},r.a.createElement(N.a,null,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(g,{client:this.props.client,refreshList:function(){e.refreshList(),e.setState({currentAd:void 0})},currentAd:this.state.currentAd}))),r.a.createElement(T.a,{exact:!0,path:"/"},r.a.createElement(N.a,null,r.a.createElement("h1",{className:"header"},"Blog Articles"),r.a.createElement("br",null),r.a.createElement(S.a,{variant:"success"},r.a.createElement(B.b,{className:"btn btn-success",to:"/add"},"New Article"))),r.a.createElement(N.a,null,this.buildrows()))))}}]),a}(r.a.Component),I=a(55),H=a.n(I),F=a(68),M=a(56),P=a.n(M),V="https://blog-ap-1.herokuapp.com/",_=function(){function e(t,a){Object(o.a)(this,e),this.tokenProvider=t,this.logoutHandler=a}return Object(i.a)(e,[{key:"login",value:function(){var e=Object(F.a)(H.a.mark((function e(t,a){return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P()({method:"post",url:"".concat(V,"auth"),data:{username:t,password:a}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"autheticatedCall",value:function(e,t,a){var n=this;return P()({method:e,url:t,headers:{authorization:this.tokenProvider()},data:a}).catch((function(e){if(403===e.response.status)return n.logoutHandler(),Promise.reject();throw e}))}},{key:"getAds",value:function(){return this.autheticatedCall("get",V)}},{key:"addAd",value:function(e,t,a,n){return this.autheticatedCall("post",V,{title:e,Date:t,description:a,markdown:n})}},{key:"removeAd",value:function(e){return this.autheticatedCall("delete","".concat(V).concat(e))}},{key:"updateAd",value:function(e,t,a,n,r){return this.autheticatedCall("put","".concat(V).concat(e),{title:t,Date:a,description:n,markdown:r})}}]),e}(),J=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={token:window.localStorage.getItem("token")},n.client=new _((function(){return n.state.token}),(function(){return n.logout()})),n}return Object(i.a)(a,[{key:"login",value:function(e){window.localStorage.setItem("token",e),this.setState({token:e})}},{key:"logout",value:function(){window.localStorage.removeItem("token"),this.setState({token:void 0})}},{key:"render",value:function(){var e=this;return this.state.token?r.a.createElement(L,{client:this.client}):r.a.createElement(v,{loggedIn:function(t){return e.login(t)},client:this.client})}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(J,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},50:function(e,t,a){},71:function(e,t,a){e.exports=a(104)},76:function(e,t,a){}},[[71,1,2]]]);
//# sourceMappingURL=main.651482ce.chunk.js.map